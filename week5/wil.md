# ✅ 5주차 WIL

## 1. 학습 내용

이번 주차에는 지난 시간에 구축한 Todo API를 기반으로 실제 데이터를 등록하고 조회하며, 수정하고 삭제하는 전체 과정을 구현해보았다. Postman을 활용하여 API 요청을 보내고 응답을 확인하였다. 이번 과정을 통해 HTTP 요청이 서버를 거쳐 데이터베이스에 반영되는 전체 흐름을 복습하고, 각 계층의 역할을 명확히 이해할 수 있었다.

Todo를 등록하기 위해서는 사용자(User)와 카테고리(Category)가 먼저 존재해야 했기 때문에 초기 데이터를 삽입하는 전용 컨트롤러를 만들어 /api/dev/init 엔드포인트를 통해 초기화를 수행하였다. 이후 할 일을 생성하는 요청을 보내면 Todo가 정상적으로 저장되는 것을 H2 콘솔을 통해 확인할 수 있었다.

## 2. 주요 개념

- **DTO 분리**: 요청과 응답을 명확히 나누기 위해 CreateRequest, ResponseDto, UpdateRequest로 DTO를 나눴다. 이를 통해 외부에 노출할 필드와 내부 처리용 필드를 구분할 수 있었다.
- **연관 관계 매핑**: Todo 객체는 User와 Category를 참조하는데, 이 관계를 제대로 매핑해야 정상적으로 저장이 가능했다.
- **HTTP 메서드 처리**: POST로 생성, GET으로 조회, DELETE로 삭제 요청을 구현했고, PATCH를 통해 수정까지 처리할 수 있도록 준비했다.
- **예외 처리 흐름**: 사용자 ID나 카테고리 ID가 잘못 들어왔을 때의 예외 상황을 명확히 구분하고 메시지를 통해 오류를 추적했다.

## 3. 실습 내용

- `/api/dev/init`을 통해 User와 Category를 먼저 생성한 후, Todo 등록 요청을 보냈다.
- H2 콘솔에서 실제 테이블이 생성되고 데이터가 저장되는 것을 직접 확인했다.
- 잘못된 요청이 들어왔을 때 500 에러가 발생했고, 이 원인을 찾아가며 Controller와 Service 로직을 점검하고 수정했다.
- Postman에서 DELETE 요청이 실패한 경우를 분석한 끝에, 존재하지 않는 ID를 요청하거나 매핑이 누락된 경우라는 것을 파악했다.
- 요청과 응답의 구분을 위해 다양한 형태의 DTO를 활용하였다. 생성 요청에는 TodoCreateRequest, 응답에는 TodoResponseDto, 수정 시에는 TodoUpdateRequest를 각각 사용하였다. 이러한 구조 덕분에 클라이언트와의 데이터 흐름이 명확하게 구분되었고, 코드의 가독성도 좋아졌다.

## 4. 느낀 점

이번 주차 실습에서 가장 크게 느낀 점은, 단순한 코드 작성보다 문제를 해결해가는 과정 자체가 중요하다는 것이었다. 할 일을 등록하는 과정에서 /api/todos 요청 시 500 오류가 발생했고, 이는 단순한 문법 문제가 아니라 User와 Category 객체가 존재하지 않거나, 영속성 컨텍스트에서 연결이 제대로 이루어지지 않은 것이 원인이었다.

이 문제를 해결하면서 JPA에서의 연관관계 설정, 특히 @ManyToOne과 같은 어노테이션의 중요성을 실감할 수 있었다. DTO로 전달받은 userId, categoryId를 실제 엔티티로 변환해 Todo와 연결하는 과정은 객체 모델과 DB 간의 구조를 이해하는 데 많은 도움이 되었다.

또한, 에러 메시지를 통해 원인을 추적하고 해결해 나가는 디버깅 과정은 퍼즐을 푸는 것처럼 흥미로웠다. 처음엔 막막했지만 로그를 따라가며 원인을 좁혀가다 보니 문제를 정확히 짚을 수 있었고, 정상적으로 응답이 왔을 때는 큰 성취감을 느낄 수 있었다.

 직접 원인을 파악하며 해결하는 과정에서 더 깊은 이해를 얻을 수 있었다. 이번 실습은 단순한 기능 구현을 넘어, 실제로 동작하는 애플리케이션을 만들기 위한 사고 과정과 태도를 익히는 경험이었다.

## 5. 과제 사진

### 1. Postman으로 Todo 작성
![Postman 실습](image1.png)
